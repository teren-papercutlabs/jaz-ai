# Recipe: Deferred Revenue

## Scenario

A customer pays $24,000 upfront for a 12-month SaaS subscription (Jan 1 to Dec 31, 2025). The cash is a liability on day one (you owe the service), then recognized as revenue evenly over 12 months at $2,000/month.

**Pattern:** Scheduler + capsule (fixed monthly amount)

---

## Accounts Involved

| Account | Type | Subtype | Role |
|---|---|---|---|
| Deferred Revenue | Liability | Current Liability | Holds unearned revenue |
| Subscription Revenue | Revenue | Revenue | Receives monthly recognition |
| Cash / Bank Account | Asset | Bank | Receives the upfront payment |
| Accounts Receivable | Asset | Current Asset | If recorded as an invoice first |

---

## Journal Entries

### Step 1: Record the Upfront Payment

**Option A — Invoice (with or without payment):**

Create an invoice to the customer for $24,000 with the line item coded to **Deferred Revenue** (not Subscription Revenue). Record payment on the invoice when ready.

**Option B — Cash-in entry:**

| Line | Account | Debit | Credit |
|---|---|---|---|
| 1 | Cash / Bank Account | $24,000 | |
| 2 | Deferred Revenue | | $24,000 |

### Step 2: Monthly Revenue Recognition (Scheduler)

Create a journal scheduler that runs monthly for 12 periods:

| Line | Account | Debit | Credit |
|---|---|---|---|
| 1 | Deferred Revenue | $2,000 | |
| 2 | Subscription Revenue | | $2,000 |

**Scheduler settings:**
- Frequency: Monthly
- Start date: 2025-01-31 (end of first month)
- **End date: 2025-12-31** — the end date is what ensures the deferred balance fully unwinds to zero. After the 12th entry, the scheduler stops and the Deferred Revenue account is cleared.
- Capsule: "FY2025 SaaS — Acme Corp"
- Description: `Revenue recognition — {{MONTH_NAME}} {{YEAR}}`

---

## Capsule Structure

**Capsule:** "FY2025 SaaS — Acme Corp"
**Capsule Type:** "Deferred Revenue"

Contents:
- 1 invoice (or cash-in entry) — the initial $24,000 payment
- 12 journal entries — generated by the scheduler ($2,000/month)
- **Total entries:** 13

---

## Worked Example

**Setup (Jan 1, 2025):**
- Record invoice to customer: Dr AR $24,000 / Cr Deferred Revenue $24,000
- Record payment on invoice: Dr Cash $24,000 / Cr AR $24,000
- Assign invoice to capsule "FY2025 SaaS — Acme Corp"
- Create scheduler with same capsule

**Month 1 (Jan 31, 2025) — auto-generated:**
- Dr Deferred Revenue $2,000 / Cr Subscription Revenue $2,000
- Deferred balance: $22,000

**Month 6 (Jun 30, 2025) — auto-generated:**
- Dr Deferred Revenue $2,000 / Cr Subscription Revenue $2,000
- Deferred balance: $12,000

**Month 12 (Dec 31, 2025) — auto-generated:**
- Dr Deferred Revenue $2,000 / Cr Subscription Revenue $2,000
- Deferred balance: $0

**Year-end totals:**
- Subscription Revenue P&L: $24,000
- Deferred Revenue balance: $0
- Cash increased by: $24,000

---

## Enrichment Suggestions

| Enrichment | Value | Why |
|---|---|---|
| Tracking Tag | "SaaS Revenue" | Filter all subscription revenue entries |
| Nano Classifier | Product → "Enterprise Plan" | Break down revenue by product tier |
| Custom Field | "Contract Number" → "CTR-2025-042" | Record contract reference on the invoice |

Set the tag and nano classifier on the scheduler — all 12 generated journals inherit them automatically.

---

## Verification

1. **Group General Ledger by Capsule** → "FY2025 SaaS — Acme Corp" should show all 13 entries with Deferred Revenue netting to zero.
2. **Trial Balance at Dec 31** → Deferred Revenue balance should be $0. Subscription Revenue should show $24,000.
3. **Trial Balance at Jun 30** → Deferred Revenue balance should be $12,000. Subscription Revenue should show $12,000.
4. **P&L for Q1** → Subscription Revenue = $6,000 (3 months × $2,000).

---

## Variations

**Quarterly recognition:** $6,000/quarter for 4 quarters. Change scheduler frequency to quarterly.

**Mid-month start:** If the subscription starts Feb 15, prorate February ($24,000 / 365 × 14 days ≈ $921), recognize the remainder over 11 full months at $2,098/month. Use a manual journal for the prorated first period, then a scheduler for remaining full months — both in the same capsule.

**Multi-customer:** Create a separate capsule per customer contract. Tags can span all customers (e.g., "SaaS Revenue" tag across all capsules).

**Early termination:** If the customer cancels after month 8, remaining deferred revenue ($8,000) is recognized immediately via a manual journal in the capsule. Delete or end the scheduler.

**Multi-currency:** If the customer pays in USD but your base currency is SGD, record the invoice using `currency: { sourceCurrency: "USD" }`. Monthly recognition journals should be in SGD at the rate locked on the invoice date.
